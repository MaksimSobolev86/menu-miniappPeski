<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Test Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h2>Mini App –¢–µ—Å—Ç</h2>
  <button onclick="send()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>

  <script>
    function send() {
      const tg = window.Telegram.WebApp;
      const payload = {
        test: true,
        message: "–ü—Ä–∏–≤–µ—Ç –æ—Ç Mini App!"
      };

      console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞:", payload);

      if (tg && typeof tg.sendData === "function") {
        tg.sendData(JSON.stringify(payload));
        setTimeout(() => tg.close(), 500);
      } else {
        alert("‚ùå sendData –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");
      }
    }

    window.addEventListener("DOMContentLoaded", () => {
      const tg = window.Telegram.WebApp;
      if (tg) {
        tg.ready();
        tg.expand();
      }
      console.log("üß© Telegram WebApp –æ–±—ä–µ–∫—Ç:", tg);
    });
  </script>
</body>
</html>
